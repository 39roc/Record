# Week6



### 객체지향 쿼리 언어

- `JPQL`
- JPA Criteria
- `QueyDSL`
- 네이티브 SQL
- JDBC API



### 프로젝션

- SELECT 절에 조회할 대상 지정
- 엔티티, 임베디드 타입, 스칼라 타입



### JPA 서브 쿼리 한계

- JPA 는 WHERE, HAVING 절에서만 서브쿼리 가능
- SELECT 절 가능 (하이버네이트 지원)
- FROM 절의 서브쿼리는 JPQL 에서 불가능하므로 조인으로 풀어서 해결



### 페치 조인

- JPQL 에서 성능 최적화 용도
- 연관된 엔티티나 컬렉션을 한번에 조회
- join fetch 명령어 사용

#### 

#### DISTINCT

- SQL DISTINCT 키워드
- 애플리케이션상에서 엔티티 중복을 제거

#### 

#### 페치 조인의 특징과 한계

- 둘 이상의 컬렉션은 페치 조인 불가능
- 컬렉션을 페치 조인하면 페이징 불가능
  - xToMany 페이징 불가능
  - 세타 조인으로 애플리케이션상에서 모든 결과값을 로딩하고 페이징하나 경로 로그 및 메모리상 위험



### 네임드 쿼리

- 미리 정의해 이름 부여 후 사용
- 정적 쿼리
- 어노테이션, XML 정의
- 애플리케이션 로딩 시점에 쿼리 검증



### 벌크 연산

벌크 연산은 영속성 컨텍스트를 무시하고 DB에 직접 쿼리

- 쿼리 한번으로 여러 테이블 로우 변경

- 벌크 연산 후 영속성 컨텍스트 초기화 필요



