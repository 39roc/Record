# Ch04 영속성 관리



### 3.1 엔티티 매니저 팩토리와 엔티티 매니저

데이터베이스를 하나만 사용하는 애플리케이션은 일반적으로 EntityManagerFactory를 하나만 생성한다.

> :bulb: 왜 하나의 엔티티매니저 팩토리에서  다수의 엔티티매니저를 사용하는 방식일까?
>
> **엔티티 매니저 팩토리**는 여러 스레드가 동시에 접근해도 안전해서 서로 다른 스레드 간에 공유해도 되지만 
>
> **엔티티 매니저**는 여러 스레드가 동시에 접근하면 동시성 문제가 발생하므로 스레드 간에 절대 공유하면 안된다.



### 3.2 영속성 컨텍스트란?

엔티티를 영구 저장하는 환경

엔티티 매니저로 엔티티를 저장하거나 조회하면 엔티티 매니저는 영속성 컨텍스트에 엔티티를 보관하고 관리한다.



영속성 컨텍스트는 논리적인 개념에 가깝고 엔티티 매니저를 생성할때 마다 하나 만들어진다.

> 여러 엔티티 매니저가 같은 영속성 컨텍스트에 접근 할수도 있다.



### 3.3 엔티티의 생명주기

